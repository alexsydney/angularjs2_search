{"version":3,"sources":["components/book-welcome.component.ts"],"names":[],"mappings":"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","file":"components/book-welcome.component.js","sourcesContent":["import {Component} from \"angular2/core\";\nimport {ControlGroup, Control, Validators} from \"angular2/common\";\nimport {BookItemService} from \"../services/book-item.service\";\n\n@Component({\n  selector: \"book-welcome\",\n  templateUrl: \"partials/book-welcome.html\",\n  // CSS Styles\n  styles: [\n    // CSS Styles - Backtick usage\n    `\n      .newBookForm {\n        padding: 20px;\n      }\n\n      .newBookFormItem {\n        padding: 10px;\n      }\n\n      .newBookFormLabel {\n        padding-right: 10px;\n      }\n\n      .glowing-border {\n        border: 2px solid #dadada;\n        border-radius: 7px;\n      }\n\n      .glowing-border:focus { \n        outline: none;\n        border-color: #9ecaed;\n        box-shadow: 0 0 10px #9ecaed;\n      }\n    `\n  ],\n  // CSS Styles in External Stylesheet\n  styleUrls: [\n    \"css/app.css\"\n  ],\n  inputs: [\"bookChildWelcome\"]\n})\n\nexport class BookWelcomeComponent {\n\n  /** \n   * Default value false. If user tries to submit the form after\n   * enter a Book Name or Book Author that already exists, this is\n   * set to true, and the user is shown an error message\n   */\n  duplicateExists = false;\n\n  successCreatingBook = false;\n\n  /** \n   * Default value true. If user clicks \"NO\" on Welcome Template\n   * hasNewBook is set to false and Welcome Template closes\n   */\n  hasNewBook = true;\n\n  /**\n   * Store locally array of JSON book objects retrieved from\n   * BookItemService\n   */\n  bookItems;\n\n  // Class Property for Form\n  form;\n\n  constructor(private bookItemService: BookItemService) {}\n\n  // Lifecycle Events\n  ngOnInit() {\n    this.bookItems = this.bookItemService.get();\n\n    this.form = new ControlGroup({\n      // Default Values are Empty Strings\n      \"name\": new Control(\"\", Validators.compose([\n        Validators.required,\n        Validators.pattern(\"[\\\\w\\\\-\\\\s\\\\/]+\")\n      ])),\n      \"author\": new Control(\"\", Validators.compose([\n        Validators.required,\n        Validators.pattern(\"[\\\\w\\\\-\\\\s\\\\/]+\")\n      ]))\n    });\n  }\n\n  // Close the Welcome Component\n  onClose() {\n    this.hasNewBook = false;\n  }\n\n  // Custom Validator to Check Duplicate Book Not Exist\n  duplicateValidator(submitBookItem) {\n    // var duplicateExists = false;\n\n    for (let book = 0; book < this.bookItems.length; book++) {\n      for (let key in this.bookItems[book]) {\n        if (this.bookItems.hasOwnProperty(book)) {\n          if (this.bookItems[book][key] === submitBookItem[\"name\"].trim() ||\n            this.bookItems[book][key] === submitBookItem[\"author\"].trim()) {\n            this.duplicateExists = true;\n            console.log(\"Duplicate Detected: \" + this.bookItems[book][key]);\n          } else {\n            // console.log(\"Non-duplicate: \" + this.bookItems[book][key]);\n          }\n        }\n      }\n    }\n\n    // return duplicateExists;\n  }\n\n  onSubmit(submitBookItem) {\n\n    // Reset value of duplicateExists to allow next submission\n    this.duplicateExists = false;\n\n    // Reset value of successCreatingBook\n    this.successCreatingBook = false;\n\n    // Do not add duplicate book items\n    this.duplicateValidator(submitBookItem);\n\n    if (this.duplicateExists === false) {\n      this.bookItemService.add(submitBookItem);\n\n      // Show success message to user\n      this.successCreatingBook = true;\n\n      console.log(\"Added Book Item: \" + JSON.stringify(submitBookItem) );\n      console.log(\"Updated Book Items List: \" + JSON.stringify(this.bookItemService.get()) );\n    }\n\n  }\n}\n"],"sourceRoot":"/source/"}